AC_MSG_CHECKING(if kppp's headers are installed)
# this is a little piece of code out of kppp. If it doesn't compile,
# kppp is not good for this system. It doesn't do anything, but enough
# to fail ;)
cat > conftest.C <<EOF
#include <arpa/inet.h>
#include <net/ppp_defs.h>
#include <netinet/in.h>

#ifdef __svr4__
  #include <sys/stropts.h>
  #include <net/pppio.h>		/* SVR4, Solaris 2, etc. */

#else
  #include <sys/time.h>
  #include <sys/socket.h>
  #include <net/if.h>

  #ifndef STREAMS 

    #if defined(linux) && !(__GLIBC__ >= 2)
      #include <linux/if_ppp.h>
    #else
      #include <net/if_ppp.h>                /* BSD, Linux, NeXT, etc. */
    #endif

  #else				/* SunOS 4, AIX 4, OSF/1, etc. */
    #include <sys/stream.h>
    #include <net/ppp_str.h>
  #endif
#endif
EOF

AC_LANG_CPLUSPLUS
if AC_TRY_EVAL(ac_compile); then
  AC_MSG_RESULT(yes)
else
  DO_NOT_COMPILE="$DO_NOT_COMPILE kppp"
  AC_MSG_RESULT(no)
fi
rm -r conftest.*
